{% extends "base.html" %}

{% block content %}
        <h1>ACEestFitness and Gym</h1>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                <div class="message {{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}

        <form action="/" method="post">
            <div class="form-group">
                <label for="category">Category:</label>
                <select id="category" name="category" required>
                    <option value="" disabled selected>Select a category</option>
                    <option value="Warm-up">Warm-up</option>
                    <option value="Workout">Workout</option>
                    <option value="Cool-down">Cool-down</option>
                </select>
            </div>
            <div class="form-group"><label for="workout">Workout:</label><input type="text" id="workout" name="workout" required></div>
            <div class="form-group"><label for="duration">Duration (minutes):</label><input type="number" id="duration" name="duration" min="1" required></div>
            <button type="submit" class="btn">Add Session</button>
        </form>

        <h2>Logged Workouts</h2>
        {% for category, sessions in workouts.items() %}
            <h3>{{ category }}</h3>
            <ul class="workout-list">
                {% for entry in sessions %}
                    <li>{{ entry.exercise }} - {{ entry.duration }} min <small>({{ entry.timestamp }})</small></li>
                {% else %}
                    <li>No sessions recorded.</li>
                {% endfor %}
            </ul>
        {% endfor %}

        <div class="summary">
            <p><strong>Total Time Spent:</strong> {{ total_time }} minutes</p>
            <p><em>{{ motivational_note }}</em></p>
        </div>
{% endblock %}